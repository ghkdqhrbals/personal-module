<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/base}">
<head>
    <title>Dashboard - NotiPaper</title>
</head>

<body>

<div layout:fragment="content">

    <h1 class="text-3xl font-bold mb-2">Dashboard</h1>
    <p class="text-gray-600 mb-8">Track your research papers and stay updated with the latest versions</p>

    <!-- KPI Cards -->
    <div class="grid grid-cols-3 gap-6 mb-10">

        <div class="p-6 bg-white rounded-xl border shadow-sm">
            <div class="text-gray-500 text-sm mb-1">Total Papers</div>
            <div class="text-3xl font-semibold" th:text="${totalPapers}">24</div>
        </div>

        <div class="p-6 bg-white rounded-xl border shadow-sm">
            <div class="text-gray-500 text-sm mb-1">Recent Updates</div>
            <div class="text-3xl font-semibold" th:text="${recentCount}">5</div>
        </div>

        <div class="p-6 bg-white rounded-xl border shadow-sm">
            <div class="text-gray-500 text-sm mb-1">Pending Summaries</div>
            <div class="text-3xl font-semibold" th:text="${pendingSummaries}">8</div>
        </div>

    </div>

    <!-- Recent Updates Header -->
    <div class="flex items-center justify-between mb-4">
        <h2 class="text-xl font-semibold">Recent Updates</h2>
        <a th:href="@{/papers}" class="text-blue-600 text-sm">View All</a>
    </div>

    <!-- Paper Card List -->
    <div class="space-y-6" th:each="paper : ${recentPapers}">

        <div class="bg-white p-6 rounded-xl border shadow-sm">

            <!-- Title -->
            <div class="flex items-center justify-between">
                <h3 class="text-lg font-semibold" th:text="${paper.title}">Paper Title</h3>

                <span class="text-xs px-3 py-1 rounded-full"
                      th:classappend="${paper.summaryReady} ? 'bg-blue-100 text-blue-700' : 'bg-gray-200 text-gray-600'"
                      th:text="${paper.summaryReady} ? 'Summary Ready' : 'Processing'">
                </span>
            </div>

            <!-- Authors -->
            <p class="text-gray-600 text-sm mt-1" th:text="${paper.authors}">John, Alice â€¦</p>

            <!-- arxiv ID -->
            <div class="mt-3 inline-flex items-center space-x-2">
                <span class="text-xs font-mono px-2 py-1 bg-gray-100 rounded"
                      th:text="${paper.arxivId}">2401.12345</span>

                <button onclick="navigator.clipboard.writeText(this.previousElementSibling.innerText)"
                        class="text-gray-500 hover:text-gray-700">
                    ğŸ“‹
                </button>
            </div>

            <!-- Summary snippet -->
            <p class="text-gray-700 text-sm mt-4 line-clamp-2"
               th:text="${paper.summary ?: 'No summary available.' }">
                We present a novel approachâ€¦
            </p>

            <!-- Footer -->
            <div class="flex justify-between items-center mt-5 text-sm text-gray-500">

                <span>
                    Updated <span th:text="${paper.updatedAt}">2024-01-15</span>,
                    v<span th:text="${paper.version}">2</span>
                </span>

                <div class="flex items-center space-x-5">
                    <a th:href="@{/papers/{id}(id=${paper.id})}" class="flex items-center space-x-1 hover:text-blue-600">
                        <span>ğŸ‘ï¸</span><span>View Details</span>
                    </a>
                    <a th:href="@{/papers/edit/{id}(id=${paper.id})}" class="hover:text-blue-600">âœï¸</a>
                    <a th:href="@{/papers/delete/{id}(id=${paper.id})}" class="hover:text-red-600">ğŸ—‘ï¸</a>
                </div>

            </div>

        </div>

    </div>

</div>

</body>
</html>