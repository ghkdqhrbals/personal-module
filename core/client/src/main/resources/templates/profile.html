<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/base}">
<head>
    <title>ν”„λ΅ν•„ - NotiPaper</title>
</head>

<body>

<div layout:fragment="content">

    <h1 class="text-3xl font-bold mb-2">λ‚΄ ν”„λ΅ν•„</h1>
    <p class="text-gray-600 mb-8">μ‚¬μ©μ μ •λ³΄ λ° κµ¬λ… ν„ν™©μ„ ν™•μΈν•μ„Έμ”</p>

    <!-- Error Message -->
    <div th:if="${error}" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6">
        <p th:text="${error}"></p>
    </div>

    <!-- User Info Card -->
    <div th:if="${user}" class="bg-white p-8 rounded-xl border shadow-sm mb-8">
        <div class="flex items-start justify-between">
            <div class="flex items-center space-x-6">
                <div class="w-20 h-20 rounded-full bg-blue-500 text-white flex items-center justify-center text-3xl">
                    π‘¤
                </div>
                <div>
                    <h2 class="text-2xl font-semibold" th:text="${user.name}">μ‚¬μ©μ μ΄λ¦„</h2>
                    <p class="text-gray-600 mt-1" th:text="${user.email}">user@example.com</p>
                    <div class="mt-2 flex items-center space-x-4 text-sm text-gray-500">
                        <span th:text="'λ‚μ΄: ' + ${user.age} + 'μ„Έ'">λ‚μ΄: 25μ„Έ</span>
                        <span>β€Ά</span>
                        <span th:text="'μ„±λ³„: ' + ${user.gender}">μ„±λ³„: MALE</span>
                        <span>β€Ά</span>
                        <span th:text="'μƒνƒ: ' + ${user.status}">μƒνƒ: ACTIVE</span>
                    </div>
                </div>
            </div>
            <a th:href="@{/settings}" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                ν”„λ΅ν•„ μμ •
            </a>
        </div>

        <!-- Additional Info -->
        <div class="mt-6 pt-6 border-t grid grid-cols-2 gap-4">
            <div>
                <p class="text-sm text-gray-500">μ „ν™”λ²νΈ</p>
                <p class="font-medium" th:text="${user.phoneNumber}">010-1234-5678</p>
            </div>
            <div>
                <p class="text-sm text-gray-500">κ°€μ…μΌ</p>
                <p class="font-medium" th:text="${#temporals.format(user.createdAt, 'yyyy-MM-dd')}">2024-01-01</p>
            </div>
        </div>
    </div>

    <!-- Subscriptions Section -->
    <div class="bg-white p-8 rounded-xl border shadow-sm">
        <div class="flex items-center justify-between mb-6">
            <h2 class="text-xl font-semibold">λ‚΄ κµ¬λ… λ©λ΅</h2>
            <a th:href="@{/subscriptions}" class="text-blue-600 text-sm hover:underline">κµ¬λ… κ΄€λ¦¬ν•κΈ° β†’</a>
        </div>

        <!-- Subscription List -->
        <div th:if="${subscriptions != null and !subscriptions.isEmpty()}">
            <div class="space-y-4">
                <div th:each="subscription : ${subscriptions}"
                     class="flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50">
                    <div class="flex-1">
                        <h3 class="font-semibold" th:text="${subscription.subscribe.name}">κµ¬λ… μ£Όμ </h3>
                        <p class="text-sm text-gray-600" th:text="${subscription.subscribe.description}">μ£Όμ  μ„¤λ…</p>
                        <div class="mt-2 flex items-center space-x-3">
                            <span class="text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded"
                                  th:text="${subscription.subscribe.subscribeType}">KEYWORD</span>
                            <span class="text-xs text-gray-500">
                                μ°μ„ μμ„: <span th:text="${subscription.priority}">3</span>
                            </span>
                            <span class="text-xs text-gray-500">
                                κµ¬λ…μΌ: <span th:text="${#temporals.format(subscription.subscribedAt, 'yyyy-MM-dd')}">2024-01-01</span>
                            </span>
                        </div>
                    </div>
                    <div class="flex items-center space-x-2">
                        <span th:if="${subscription.notificationEnabled}"
                              class="text-green-500 text-sm">π”” μ•λ¦Ό μΌμ§</span>
                        <span th:unless="${subscription.notificationEnabled}"
                              class="text-gray-400 text-sm">π”• μ•λ¦Ό κΊΌμ§</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Empty State -->
        <div th:if="${subscriptions == null or subscriptions.isEmpty()}"
             class="text-center py-12">
            <div class="text-6xl mb-4">π“¬</div>
            <p class="text-gray-600 mb-4">μ•„μ§ κµ¬λ…μ¤‘μΈ μ£Όμ κ°€ μ—†μµλ‹λ‹¤</p>
            <a th:href="@{/subscriptions}"
               class="inline-block px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                κµ¬λ… μ¶”κ°€ν•κΈ°
            </a>
        </div>
    </div>

</div>

</body>
</html>

